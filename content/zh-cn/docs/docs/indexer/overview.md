# Presto启发式索引器

##简介

可以使用数据库表的一个或多个列创建索引，从而提供更快的随机查找。大多数大数据格式，如ORC、Parquet和CarbonData，都已经内置了索引。

HeuristicIndexer允许在现有数据上创建索引，但存储原始数据源外部的索引。这样做有几个好处：

-索引对基础数据源不可知，并且可由任何查询引擎使用
?无需重写现有数据文件即可对现有数据进行索引
-基础数据源不支持的新索引类型可以被创建
-索引数据不占用数据源存储空间

##示例用例

### 1.过滤查询执行时的定时Split

当引擎需要调度TableScan操作时，它会调度worker上的Split。这些Split负责读取部分源数据。但是，如果应用了谓词，则并非所有Split都会返回数据。

通过为谓词列保留外部索引，启发式索引器可以确定每个分裂是否包含正在搜索的值，并且只对可能包含该值的分裂安排读操作。

![]（索引器拆分文件.png）

### 2.读取ORC文件时尽早过滤Block

当需要从ORC文件中读取数据时，使用ORCRecordReader。此读取器以批处理（例如，。1024行），然后形成Pages。但是，如果有一个谓词存在，那么就不需要批处理中的所有条目，有些条目可能会在稍后被Filter运算符过滤掉。

通过为谓词列保留外部位图索引，启发式索引器可以在甚至应用Filter运算符之前筛选出与谓词不匹配的行。

