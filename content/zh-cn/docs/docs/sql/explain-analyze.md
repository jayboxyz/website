解释分析
===============

摘要
--------

"```{.none}"
EXPLAIN ANALYZE [VERBOSE]语句说明
```

问题描述
-----------

执行语句，并显示语句的分布式执行计划以及每个操作的开销。

`VERBOSE'选项将提供更详细的信息和低层次的统计数据；了解这些可能需要了解Presto的内部细节和执行细节。


**说明**

*统计信息可能不完全准确，特别是对于快速完成的查询。*

示例
--------

在下面的示例中，您可以看到每个阶段花费的CPU时间，以及该阶段中每个计划节点的相对成本。请注意，计划节点的相对成本基于墙时间，墙时间可能与CPU时间相关，也可能不相关。对于每个计划节点，您都可以看到一些额外的统计数据（e.g：每个节点实例的平均输入，相关计划节点的平均哈希冲突数）这些统计数字是
当需要检测查询的数据异常（倾斜度、异常哈希冲突）时，它非常有用。

"```{.none}"
presto:sf1>解释分析选择数量（*），文员从订单WHERE订单日期>日期'1995-01-01'组由文员；

查询计划
-----------------------------------------------------------------------------------------------
分片1 [HASH]
成本：CPU 88.57ms，输入：4000行（148.44kB） ，输出：1000行(28.32kB)
输出布局：【数量，文员】
输出分区：SINGLE []
- Project[] =>【数量：大，文员：varchar(15)】
成本：26.24%，输入：1000行（37.11kB） ，输出：1000行（28.32kB） ，筛选：0.00%
输入平均：62.50行，输入std.dev.:14.77%
-聚合（最终）[clerk]【$hashvalue】=>【clerk:varchar(15), $hashvalue:bigint，计数：bigint】，则对内存进行回收。
成本：16.83%，输出：1000行(37.11kB)
输入平均：250.00行，输入std.dev.:14.77%
count := "计数" ("count_8") ，表示计数
- LocalExchange[HASH]【$hashvalue】（"文员"） =>文员：varchar(15)，计数_8：大号， $hashvalue：大号
成本：47.28%，产出：4000行(148.44kB)
输入平均：4000.00行，输入std.dev.:0.00%
- RemoteSource[2] => [clerk:varchar(15), count_8:bigint, $hashvalue_9:bigint]
成本：9.65%，输出：4000行(148.44kB)
输入平均：4000.00行，输入std.dev.:0.00%

碎片2[tpch:orders:1500000]（分片报文）
成本：CPU 14.00s，输入：818058行（22.62MB） ，输出：4000行(148.44kB)
输出布局：【文员，count_8,$hashvalue_10】
输出分区：HASH[clerk][$hashvalue_10]
-聚合（分区）[clerk]【$hashvalue_10】=>【clerk:varchar(15), $hashvalue_10:bigint, count_8:bigint】，则对内存进行回收操作。
成本：4.47%，输出：4000行(148.44kB)
输入平均：204514.5行，输入std.dev.:0.05%
平均碰撞次数：5701.28（约等于17569.93% est.），碰撞次数：1.12%
count_8 := "计数"(*)
-扫描过滤工程【表= tpch:tpch:orders:sf1.0，原约束= （"订购日期" > "$字面日期"(BIGINT '9131'）)，过滤谓词= （"订购日期" > "$字面值$date(BIGINT '9131'）)] =>【删除内容】
成本：95.53%，输入：150万行（0B） ，输出：818058行（22.62MB） ，筛选：45.46%
输入平均：375000.00行，输入std.dev.:0.00%
$hashvalue_10 := "组合哈希值"（BIGINT '0'， COALESCE("$operator$hash_code"("文员"）, 0))
orderdate := tpch：订单日期
职员：=tpch：文员
```

当使用`VERBOSE`选项时，某些运营商可能会报告附加信息。例如，窗口函数运算符将输出：

"```{.none}"
解释分析VERBOSE选择计数（文员）OVER ()从订单WHERE订单日期>日期'1995-01-01'；

查询计划
-----------------------------------------------------------------------------------------------
...
-窗口[] =>【文员：varchar(15)，计数：bigint】
开销：{行数：？字节数：?}
CPU分数：75.93%，输出：8130行(230.24kB)
输入平均：8130.00行，输入std.dev.:0.00%
活跃驱动： [1/1]
索引大小：std.dev.:0.00字节，0.00行
每个驱动程序的索引数：std.dev.:0.00
每个驱动程序的行数：std.dev.:0.00
分区大小：std.dev.:0.00
count := count（“文员”）
...
```

参见
--------

【解释】（./解释）
