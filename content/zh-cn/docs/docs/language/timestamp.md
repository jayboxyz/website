旧时间戳和新时间戳
========================

新的`TIMESTAMP`和`TIME`语义使类型与SQL标准保持一致。详见以下章节。


**说明**

*新的`TIMESTAMP'语义仍在试验中。建议* *保持遗留的`TIMESTAMP`语义为启用状态。您可以通过全局配置或基于每个会话配置新的语义来试验**。在将来的版本中，可能会废弃旧版的语义。


配置说明
-------------

可以使用`deprecated.legacy-timestamp`配置属性启用遗留语义。将其设置为`true`（默认）将启用遗留语义，而将其设置为`false`将启用新的语义。

此外，它可以通过`legacy_timestamp`会话属性在每个会话的基础上启用或禁用。

### TIMESTAMP语义变化

以前，`TIMESTAMP`类型描述的是Presto会话时区中的时间实例。现在， Presto将`TIMESTAMP`值视为一组表示墙时间的字段：

> - "厄拉年"
> - "一年中的一个月"
> - "月日"
> - "一天中的小时"
> -小时分钟
> - "中期" -如"DECIMAL(5,3)"

因此，`TIMESTAMP`值不会以任何方式与会话时区链接，直到明确需要某个时区，例如，在转换为`带时区的TIMESTAMP`或`带时区的TIME ZONE`时。入
这些情况下，将应用会话时区的时区偏移量，如SQL标准中所指定。

###时间语义变化

类型`TIME`与`TIMESTAMP`类似。

### TIME with TIME ZONE语义变化

由于兼容性要求，与SQL标准完全对齐`TIME WITH TIME ZONE`还是不可能的。因此，在计算`TIME WITH TIME ZONE`的时区偏移量时，
Presto使用会话的开始日期和时间。

这可以在使用`TIME WITH TIME ZONE`的查询中看到，查询的时区已经发生了时区策略更改或使用了夏令时。例如，会话开始时间为2017-03-01：

> -查询：`选择时间'10:00:00亚洲/加德满都'在时区'UTC'`
> -源结果：`04:30:00.000 UTC`
> -新结果：`04:15:00.000 UTC`
