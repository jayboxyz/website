条件表达式
=======================

案例
----

标准SQL`CASE`表达式有两种形式。简单表达式从左到右搜索每一个`value`表达式，直到找到一个等于`expression`的表达式：

"```{.none}"
CASE表达式
WHEN值THEN结果
【当...】
【ELSE结果】
结束
```

返回匹配`value`的`result`。如果找不到匹配，则返回`ELSE`子句中的`result`，否则返回null。示例：

选择a，
案件a
当1然后'一'
当2然后'二'
埃尔塞'很多'
结束

\"searched\"表单从左到右依次计算每个布尔`condition`，直到其中一个为真为止，并返回匹配`result`：

"```{.none}"
案例
条件出现时结果出现
【当...】
【ELSE结果】
结束
```

如果没有条件成立，则返回`ELSE`子句中的`result`，否则返回null。示例：

选择a,b，
案例
当a=1时，然后是aaa
当b=2时，然后是‘bbb’
ELSE '抄送'
结束

中频
--

`IF`函数实际上是一个语言构造，相当于以下`CASE`表达式：

> ```{.none} .
>案例
>当条件为Tethn时true_value
>【ELSE伪随机数值】
>结束
> ```

**if（条件，true\_value）**

如果`condition`为真，则计算并返回`true_value`，否则返回null，不计算`true_value`。


**if（条件值，true\_value,false\_value）**

如果`condition`为真，则计算并返回`true_value`，否则计算并返回`false_value`。


科莱斯
--------

**coalesce（value1, value2\【， \...\】） <功能描述>**

返回参数列表中第一个非空的`value`。和CASE表达式一样，只有在必要的时候，才会对参数进行求值。


空接口
------

**nullif(value1,value2)字段说明**

如果`value1`等于`value2`，则返回null，否则返回`value1`。


n.特里
---

**try（表达式）**

计算表达式，通过返回`NULL`处理某些类型的错误。

在遇到损坏或无效数据时，最好由查询产生`NULL`或默认值，而不是失败的情况下，`TRY`函数可能是有用的。要指定默认值，`TRY`
函数可以与`COALESCE`函数结合使用。

`TRY`处理的错误如下：

-被零除
-无效的强制转换或函数参数
-数值超出范围

###示例

部分无效数据源表：

``` {.sql}
*从运输中选择；
```

"```{.none}"
原产国|原产zip|套餐|总价
--------------+------------+----------+------------
加州|94131|25|100
加州|P332a|5|72
加州|94025|0|155
新泽西州| 08544 | 225 | 490
（4行）
```

没有`TRY`的查询失败：

``` {.sql}
选择CAST（原件_zipASBIGINT）从航运；
```

"```{.none}"
查询失败：不能将'P332a'转换为BIGINT
```

使用`TRY`的`NULL`值：

``` {.sql}
从运输中选择TRY(CAST(origin_zip AS BIGINT))选项；
```

"```{.none}"
原创_zip
------------
94131
空值
94025
08544
（4行）
```

没有`TRY`的查询失败：

``` {.sql}
选择总成本/包，从发货开始算起；
```

"```{.none}"
查询失败：除零
```

带`TRY`和`COALESCE`的默认值：

``` {.sql}
选择COALESCE（TRY(总成本/包）,0)从发货开始每包；
```

"```{.none}"
每包
-------------
4
14
0
19
（4行）
```
